server:
  port: 8080
  tomcat:
    threads:
      max: 200
      min-spare: 10
    connection-timeout: 5000

spring:
  application:
    name: ai-knowledge-classroom
  
  datasource:
    url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:classroom}
    username: ${DB_USER:classroom}
    password: ${DB_PASSWORD:classroom123}
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      idle-timeout: 300000
      connection-timeout: 20000
  
  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      database: 0
      lettuce:
        pool:
          max-active: 20
          max-idle: 10
          min-idle: 5

  task:
    execution:
      pool:
        core-size: 10
        max-size: 20

mybatis-plus:
  mapper-locations: classpath*:/mapper/**/*.xml
  configuration:
    map-underscore-to-camel-case: true
  global-config:
    db-config:
      id-type: auto
      logic-delete-field: deleted
      logic-delete-value: 1
      logic-not-delete-value: 0

sa-token:
  token-name: Authorization
  timeout: 86400
  active-timeout: 1800
  is-concurrent: true
  is-share: false
  token-style: uuid
  is-log: false
  is-read-header: true

minio:
  endpoint: ${MINIO_ENDPOINT:http://localhost:9000}
  access-key: ${MINIO_ACCESS_KEY:classroom}
  secret-key: ${MINIO_SECRET_KEY:classroom123}
  bucket-name: ${MINIO_BUCKET:classroom-files}

ai:
  default-model: ${AI_DEFAULT_MODEL:qwen}
  models:
    qwen:
      base-url: https://dashscope.aliyuncs.com/compatible-mode/v1
      api-key: ${QWEN_API_KEY:}
      model: qwen-turbo
      embedding-model: text-embedding-v3
    zhipu:
      base-url: https://open.bigmodel.cn/api/paas/v4
      api-key: ${ZHIPU_API_KEY:}
      model: glm-4-flash
      embedding-model: embedding-3
    deepseek:
      base-url: https://api.deepseek.com/v1
      api-key: ${DEEPSEEK_API_KEY:}
      model: deepseek-chat
      embedding-model: null

logging:
  level:
    root: info
    com.classroom: info
    org.springframework.ai: warn
